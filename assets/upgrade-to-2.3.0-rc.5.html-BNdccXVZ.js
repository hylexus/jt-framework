import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as a,o as s,c as o,b as e,e as r,w as c,a as i,d as l}from"./app-BxLWTMi4.js";const p={},d=i(`<h1 id="升级到2-3-0-rc-5" tabindex="-1"><a class="header-anchor" href="#升级到2-3-0-rc-5"><span>升级到2.3.0-rc.5</span></a></h1><h2 id="请先读我" tabindex="-1"><a class="header-anchor" href="#请先读我"><span>请先读我</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>如果你没有自定义过下面两种类型的组件，可以忽略这个升级提示。</p></div><ol><li><code>JtServerNettyConfigure</code> 及其子接口和实现类 <ul><li><code>Jt808ServerNettyConfigure</code><ul><li>删除了 <s>DefaultJt808ServerNettyConfigure</s></li><li>新增 <code>BuiltinJt808ServerNettyConfigure</code></li></ul></li><li><code>Jt808AttachmentServerNettyConfigure</code><ul><li>删除了 <s>DefaultJt808AttachmentServerNettyConfigure</s></li><li>新增 <code>BuiltinJt808AttachmentServerNettyConfigure</code></li></ul></li></ul></li><li><code>AbstractRunner</code> 构造器参数变更</li></ol><h2 id="变更原因" tabindex="-1"><a class="header-anchor" href="#变更原因"><span>变更原因</span></a></h2><p>之前版本的 <code>JtServerNettyConfigure</code> 设计不太合理：</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// 之前版本的 Jt808ServerNettyConfigure(相关方法已经删除)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Jt808ServerNettyConfigure</span> <span class="token punctuation">{</span>

    <span class="token keyword">void</span> <span class="token function">configureServerBootstrap</span><span class="token punctuation">(</span><span class="token class-name">ServerBootstrap</span> serverBootstrap<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">configureSocketChannel</span><span class="token punctuation">(</span><span class="token class-name">SocketChannel</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>默认实现中在 <code>configureServerBootstrap()</code> 方法中调用了 <code>configureSocketChannel()</code>，这可能导致用户覆盖掉对 <code>configureSocketChannel()</code> 方法的调用。</p><p>下面是新的 <code>Jt808ServerNettyConfigure</code> 接口方法:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// 新的 Jt808ServerNettyConfigure</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Jt808ServerNettyConfigure</span> <span class="token keyword">extends</span> <span class="token class-name">JtServerNettyConfigure</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * <span class="token keyword">@param</span> <span class="token parameter">configProvider</span> 可以从中读取配置项(环境变量、系统属性、application.yaml、...)
     * <span class="token keyword">@return</span> 返回入参中的 <span class="token punctuation">{</span><span class="token keyword">@code</span> <span class="token code-section"><span class="token code language-java">serverBootstrap</span></span><span class="token punctuation">}</span> 或 返回一个新的 <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">ServerBootstrap</span></span> ServerBootstrap<span class="token punctuation">}</span> 实例
     */</span>
    <span class="token class-name">ServerBootstrap</span> <span class="token function">configureServerBootstrap</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationProvider</span> configProvider<span class="token punctuation">,</span> <span class="token class-name">ServerBootstrap</span> serverBootstrap<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">configureSocketChannel</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationProvider</span> configProvider<span class="token punctuation">,</span> <span class="token class-name">SocketChannel</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>新版本的 <code>configureServerBootstrap()</code> 和 <code>configureSocketChannel()</code> 方法的调用移动到了 <code>AbstractRunner</code> 中，并且 <code>AbstractRunner</code> 的构造器参数也发生了变化。</p><h2 id="升级参考" tabindex="-1"><a class="header-anchor" href="#升级参考"><span>升级参考</span></a></h2><p>如果你没有自定义 <code>JtServerNettyConfigure</code> 及其子接口和实现类，那么你不需要做任何改动。</p><p>反之，请参考下面链接：</p>`,14);function u(v,m){const n=a("RouteLink");return s(),o("div",null,[d,e("ul",null,[e("li",null,[r(n,{to:"/v2/jt-808/guide/customization/netty-config.html#%E7%A4%BA%E4%BE%8B"},{default:c(()=>[l("定制化 - Netty相关 - 自定义示例")]),_:1})])])])}const h=t(p,[["render",u],["__file","upgrade-to-2.3.0-rc.5.html.vue"]]),f=JSON.parse('{"path":"/v2/jt-808/guide/migration/upgrade-to-2.3.0-rc.5.html","title":"升级到2.3.0-rc.5","lang":"zh-CN","frontmatter":{"icon":"merge","description":"升级到2.3.0-rc.5 请先读我 提示 如果你没有自定义过下面两种类型的组件，可以忽略这个升级提示。 JtServerNettyConfigure 及其子接口和实现类 Jt808ServerNettyConfigure 删除了 新增 BuiltinJt808ServerNettyConfigure Jt808AttachmentServerNett...","head":[["meta",{"property":"og:url","content":"https://github.com/hylexus/jt-framework/jt-framework/v2/jt-808/guide/migration/upgrade-to-2.3.0-rc.5.html"}],["meta",{"property":"og:site_name","content":"jt-framework"}],["meta",{"property":"og:title","content":"升级到2.3.0-rc.5"}],["meta",{"property":"og:description","content":"升级到2.3.0-rc.5 请先读我 提示 如果你没有自定义过下面两种类型的组件，可以忽略这个升级提示。 JtServerNettyConfigure 及其子接口和实现类 Jt808ServerNettyConfigure 删除了 新增 BuiltinJt808ServerNettyConfigure Jt808AttachmentServerNett..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-16T12:29:51.000Z"}],["meta",{"property":"article:author","content":"hylexus"}],["meta",{"property":"article:modified_time","content":"2025-04-16T12:29:51.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"升级到2.3.0-rc.5\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-04-16T12:29:51.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"hylexus\\",\\"url\\":\\"https://github.com/hylexus\\"}]}"]]},"headers":[{"level":2,"title":"请先读我","slug":"请先读我","link":"#请先读我","children":[]},{"level":2,"title":"变更原因","slug":"变更原因","link":"#变更原因","children":[]},{"level":2,"title":"升级参考","slug":"升级参考","link":"#升级参考","children":[]}],"git":{"createdTime":1744806591000,"updatedTime":1744806591000,"contributors":[{"name":"hylexus","email":"hylexus@163.com","commits":1}]},"readingTime":{"minutes":1.05,"words":316},"filePathRelative":"v2/jt-808/guide/migration/upgrade-to-2.3.0-rc.5.md","localizedDate":"2025年4月16日","autoDesc":true,"excerpt":"\\n<h2>请先读我</h2>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>如果你没有自定义过下面两种类型的组件，可以忽略这个升级提示。</p>\\n</div>\\n<ol>\\n<li><code>JtServerNettyConfigure</code> 及其子接口和实现类\\n<ul>\\n<li><code>Jt808ServerNettyConfigure</code>\\n<ul>\\n<li>删除了 <s>DefaultJt808ServerNettyConfigure</s></li>\\n<li>新增 <code>BuiltinJt808ServerNettyConfigure</code></li>\\n</ul>\\n</li>\\n<li><code>Jt808AttachmentServerNettyConfigure</code>\\n<ul>\\n<li>删除了 <s>DefaultJt808AttachmentServerNettyConfigure</s></li>\\n<li>新增 <code>BuiltinJt808AttachmentServerNettyConfigure</code></li>\\n</ul>\\n</li>\\n</ul>\\n</li>\\n<li><code>AbstractRunner</code> 构造器参数变更</li>\\n</ol>"}');export{h as comp,f as data};
