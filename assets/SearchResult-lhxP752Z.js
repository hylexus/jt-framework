import{u as U,f as Z,g as ee,h as B,i as te,j as ie,t as ae,k as se,l as E,m as A,n as le,p as M,q as i,s as oe,R as O,v as ne,x as ue,y as re,z as _,A as I,B as ce,C as ve,D as de,E as me,O as ge,F as he,G as pe,P as je,H as ye,I as fe,J as R}from"./app-BEQS3wW-.js";const be=["/","/about.html","/frequently-asked-questions/debug.html","/frequently-asked-questions/","/frequently-asked-questions/package-parsing.html","/frequently-asked-questions/what-is-the-difference-between-v1-and-v2.html","/protocol-introduction/","/v2/release-notes/1.x.html","/v2/release-notes/2.0.x.html","/v2/release-notes/2.1.x.html","/v2/release-notes/latest.html","/protocol-introduction/808/type-mapping.html","/protocol-introduction/808/v2011.html","/protocol-introduction/808/v2013.html","/protocol-introduction/808/v2019.html","/v1/jt-809/","/v2/jt-808/config/","/v2/jt-808/config/extension-jiangsu.html","/v2/jt-808/config/features.html","/v2/jt-808/config/message-handler.html","/v2/jt-808/config/message-processor.html","/v2/jt-808/config/others.html","/v2/jt-808/config/protocol.html","/v2/jt-808/config/server.html","/v2/jt-808/config/sub-package.html","/v2/jt-808/extension/","/v2/jt-808/guide/","/v1/jt-808/config/","/v1/jt-808/guide/","/v2/jt-808/guide/annotation-based-dev/annotation-alias.html","/v2/jt-808/guide/annotation-based-dev/custom-annotation.html","/v2/jt-808/guide/annotation-based-dev/data-type-mapping-via-alias.html","/v2/jt-808/guide/annotation-based-dev/data-type-mapping.html","/v2/jt-808/guide/annotation-based-dev/exception-handler.html","/v2/jt-808/guide/annotation-based-dev/extra-location-msg-paring.html","/v2/jt-808/guide/annotation-based-dev/","/v2/jt-808/guide/annotation-based-dev/location-batch-upload-msg-parse-demo.html","/v2/jt-808/guide/annotation-based-dev/location-upload-msg-parse-demo.html","/v2/jt-808/guide/annotation-based-dev/notices-for-builtin-msg.html","/v2/jt-808/guide/annotation-based-dev/req-msg-mapping.html","/v2/jt-808/guide/annotation-based-dev/resp-msg-mapping.html","/v2/jt-808/guide/basic/command-sender.html","/v2/jt-808/guide/basic/handler-interceptor.html","/v2/jt-808/guide/basic/","/v2/jt-808/guide/basic/request-msg-handler-argument-resolver.html","/v2/jt-808/guide/basic/request-msg-handler.html","/v2/jt-808/guide/basic/request-processing-overview.html","/v2/jt-808/guide/basic/request-sub-package.html","/v2/jt-808/guide/basic/response-msg-handler.html","/v2/jt-808/guide/basic/response-sub-package.html","/v2/jt-808/guide/basic/summary.html","/v2/jt-808/guide/customization/codec-config.html","/v2/jt-808/guide/customization/custom-thread-pool.html","/v2/jt-808/guide/customization/epoll-config.html","/v2/jt-808/guide/customization/","/v2/jt-808/guide/customization/jt-808-request-filter.html","/v2/jt-808/guide/customization/msg-encryption.html","/v2/jt-808/guide/customization/netty-config.html","/v2/jt-808/guide/customization/request-lifecycle-listener.html","/v2/jt-808/guide/customization/session-config.html","/v2/jt-808/guide/customization/sub-package-config.html","/v2/jt-808/guide/more/aware-interface.html","/v2/jt-808/guide/more/","/v2/jt-808/guide/migration/","/v2/jt-808/guide/migration/migrating-from-2.0.x-to-2.1.x.html","/v2/jt-808/guide/migration/upgrade-to-2.3.0-rc.5.html","/v2/jt-808/guide/utilities/bit-operator.html","/v2/jt-808/guide/utilities/byte-array-container.html","/v2/jt-808/guide/utilities/byte-buf-container.html","/v2/jt-808/guide/utilities/","/v2/jt-808/guide/utilities/jt808-data-type-ops.html","/v2/jt-808/guide/utilities/msg-builder.html","/v2/jt-808/guide/quick-start/building-from-source.html","/v2/jt-808/guide/quick-start/compatibility.html","/v2/jt-808/guide/quick-start/","/v2/jt-808/guide/quick-start/jt808-msg-type-parser.html","/v2/jt-808/guide/quick-start/maven-samples.html","/v2/jt-808/guide/quick-start/quick-start.html","/v2/jt-808/guide/quick-start/terminology.html","/v1/jt-808/guide/basic/","/v1/jt-808/guide/basic/protocol-introduction.html","/v1/jt-808/guide/basic/quick-start.html","/v1/jt-808/guide/annotation-based-dev/exception-handler.html","/v1/jt-808/guide/annotation-based-dev/","/v1/jt-808/guide/annotation-based-dev/location-msg-parse-demo.html","/v1/jt-808/guide/annotation-based-dev/msg-handler-register.html","/v1/jt-808/guide/annotation-based-dev/msg-push.html","/v1/jt-808/guide/annotation-based-dev/req-msg-mapping.html","/v1/jt-808/guide/annotation-based-dev/resp-msg-mapping.html","/v1/jt-808/guide/customization/auth-validator-config.html","/v1/jt-808/guide/customization/escape-config.html","/v1/jt-808/guide/customization/","/v1/jt-808/guide/customization/msg-builder.html","/v1/jt-808/guide/customization/msg-converter-config.html","/v1/jt-808/guide/customization/msg-handler-config.html","/v1/jt-808/guide/customization/msg-type-config.html","/v1/jt-808/guide/customization/netty-config.html","/v1/jt-808/guide/customization/session-config.html","/v1/jt-808/guide/customization/terminal-validator-config.html","/v1/jt-808/guide/more/","/v1/jt-808/guide/more/aware-interface.html","/v1/jt-808/guide/more/component-order.html","/v1/jt-808/guide/more/design-of-msg-processing.html","/v2/jt-808/guide/protocol-extension/jangsu/","/404.html","/v2/release-notes/","/v2/","/protocol-introduction/808/","/v1/","/v2/jt-808/","/v1/jt-808/","/v2/jt-808/guide/protocol-extension/"],qe="SEARCH_PRO_QUERY_HISTORY",g=U(qe,[]),ke=()=>{const{queryHistoryCount:a}=R,s=a>0;return{enabled:s,queryHistory:g,addQueryHistory:l=>{s&&(g.value.length<a?g.value=Array.from(new Set([l,...g.value])):g.value=Array.from(new Set([l,...g.value.slice(0,a-1)])))},removeQueryHistory:l=>{g.value=[...g.value.slice(0,l),...g.value.slice(l+1)]}}},F=a=>be[a.id]+("anchor"in a?`#${a.anchor}`:""),xe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:L}=R,h=U(xe,[]),He=()=>{const a=L>0;return{enabled:a,resultHistory:h,addResultHistory:s=>{if(a){const l={link:F(s),display:s.display};"header"in s&&(l.header=s.header),h.value.length<L?h.value=[l,...h.value]:h.value=[l,...h.value.slice(0,L-1)]}},removeResultHistory:s=>{h.value=[...h.value.slice(0,s),...h.value.slice(s+1)]}}},Re=a=>{const s=ce(),l=B(),z=ve(),n=E(!1),y=de([]);return me(()=>{const{search:q,terminate:p}=ge(),k=()=>{y.value=[],n.value=!1},f=fe(c=>{const b=c.join(" "),{searchFilter:w=m=>m,splitWord:Q,suggestionsFilter:P,...j}=s.value;n.value=!0,b?q(c.join(" "),l.value,j).then(m=>w(m,b,l.value,z.value)).then(m=>{y.value=m,n.value=!1}).catch(m=>{console.error(m),k()}):k()},R.searchDelay-R.suggestDelay);M([a,l],([c])=>f(c),{immediate:!0}),he(()=>{p()})}),{searching:n,results:y}};var we=Z({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:s}){const l=ee(),z=B(),n=te(ie),{enabled:y,addQueryHistory:q,queryHistory:p,removeQueryHistory:k}=ke(),{enabled:f,resultHistory:c,addResultHistory:b,removeResultHistory:w}=He(),Q=y||f,P=ae(a,"queries"),{results:j,searching:m}=Re(P),o=se({isQuery:!0,index:0}),v=E(0),d=E(0),T=A(()=>Q&&(p.value.length>0||c.value.length>0)),C=A(()=>j.value.length>0),S=A(()=>j.value[v.value]||null),Y=()=>{const{isQuery:e,index:t}=o;t===0?(o.isQuery=!e,o.index=e?c.value.length-1:p.value.length-1):o.index=t-1},G=()=>{const{isQuery:e,index:t}=o;t===(e?p.value.length-1:c.value.length-1)?(o.isQuery=!e,o.index=0):o.index=t+1},J=()=>{v.value=v.value>0?v.value-1:j.value.length-1,d.value=S.value.contents.length-1},V=()=>{v.value=v.value<j.value.length-1?v.value+1:0,d.value=0},K=()=>{d.value<S.value.contents.length-1?d.value+=1:V()},N=()=>{d.value>0?d.value-=1:J()},D=e=>e.map(t=>pe(t)?t:i(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=je[e.index]||"$content",[u,H=""]=ye(t)?t[z.value].split("$content"):t.split("$content");return e.display.map(r=>i("div",D([u,...r,H])))}return e.display.map(t=>i("div",D(t)))},x=()=>{v.value=0,d.value=0,s("updateQuery",""),s("close")};return le("keydown",e=>{if(a.isFocusing){if(C.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const t=S.value.contents[d.value];q(a.queries.join(" ")),b(t),l.push(F(t)),x()}}else if(f){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=o;o.isQuery?(s("updateQuery",p.value[t]),e.preventDefault()):(l.push(c.value[t].link),x())}}}}),M([v,d],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>i("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!C.value:!T.value}],id:"search-pro-results"},a.queries.length?m.value?i(oe,{hint:n.value.searching}):C.value?i("ul",{class:"search-pro-result-list"},j.value.map(({title:e,contents:t},u)=>{const H=v.value===u;return i("li",{class:["search-pro-result-list-item",{active:H}]},[i("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((r,X)=>{const $=H&&d.value===X;return i(O,{to:F(r),class:["search-pro-result-item",{active:$,"aria-selected":$}],onClick:()=>{q(a.queries.join(" ")),b(r),x()}},()=>[r.type==="text"?null:i(r.type==="title"?ne:r.type==="heading"?ue:re,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[r.type==="text"&&r.header?i("div",{class:"content-header"},r.header):null,i("div",W(r))])])})])})):n.value.emptyResult:Q?T.value?[y?i("ul",{class:"search-pro-result-list"},i("li",{class:"search-pro-result-list-item"},[i("div",{class:"search-pro-result-title"},n.value.queryHistory),p.value.map((e,t)=>i("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===t}],onClick:()=>{s("updateQuery",e)}},[i(_,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},e),i("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:u=>{u.preventDefault(),u.stopPropagation(),k(t)}})]))])):null,f?i("ul",{class:"search-pro-result-list"},i("li",{class:"search-pro-result-list-item"},[i("div",{class:"search-pro-result-title"},n.value.resultHistory),c.value.map((e,t)=>i(O,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===t}],onClick:()=>{x()}},()=>[i(_,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[e.header?i("div",{class:"content-header"},e.header):null,i("div",e.display.map(u=>D(u)).flat())]),i("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:u=>{u.preventDefault(),u.stopPropagation(),w(t)}})]))])):null]:n.value.emptyHistory:n.value.emptyResult)}});export{we as default};
