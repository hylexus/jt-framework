import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as d,c as p,b as e,d as a,e as n,w as l,a as t}from"./app-BxLWTMi4.js";const h={},u=e("h1",{id:"_808服务配置-v1",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_808服务配置-v1"},[e("span",null,"808服务配置(v1)")])],-1),m=e("p",null,"本小节会介绍808服务的配置选项。",-1),g=e("br",null,null,-1),b={href:"https://github.com/hylexus/jt-framework/tree/master/jt-808-server-spring-boot-stater/src/main/resources/META-INF/default-jt808-server-config.yml",target:"_blank",rel:"noopener noreferrer"},v=e("br",null,null,-1),k=e("br",null,null,-1),f=e("code",null,"Spring",-1),x=e("code",null,"PropertySources",-1),y=e("code",null,"default-jt808-server-config",-1),_={class:""},j=["src"],w=t(`<h2 id="配置项" tabindex="-1"><a class="header-anchor" href="#配置项"><span>配置项</span></a></h2><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">jt808</span><span class="token punctuation">:</span>
  <span class="token key atrule">print-component-statistics</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token comment"># ...</span>
  <span class="token key atrule">entity-scan</span><span class="token punctuation">:</span>
    <span class="token comment"># ...</span>
  <span class="token key atrule">handler-scan</span><span class="token punctuation">:</span>
    <span class="token comment"># ...</span>
  <span class="token key atrule">exception-handler-scan</span><span class="token punctuation">:</span>
    <span class="token comment"># ...</span>
  <span class="token key atrule">msg-processor</span><span class="token punctuation">:</span>
    <span class="token key atrule">thread-pool</span><span class="token punctuation">:</span>
      <span class="token comment"># ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="protocol" tabindex="-1"><a class="header-anchor" href="#protocol"><span>protocol</span></a></h2><h3 id="version" tabindex="-1"><a class="header-anchor" href="#version"><span>version</span></a></h3><ul><li>类型：<code>enum</code></li><li>默认值：<code>auto_detection</code></li></ul><p>808协议版本，可选值位于：<code>io.github.hylexus.jt.config.Jt808ProtocolVersion</code> 。</p><h3 id="max-frame-length" tabindex="-1"><a class="header-anchor" href="#max-frame-length"><span>max-frame-length</span></a></h3><p>对应 <code>io.netty.handler.codec.DelimiterBasedFrameDecoder</code> 的 <code>maxFrameLength</code> 属性。默认值：<code>1024</code>。</p><h2 id="server" tabindex="-1"><a class="header-anchor" href="#server"><span>server</span></a></h2><h3 id="port" tabindex="-1"><a class="header-anchor" href="#port"><span>port</span></a></h3><ul><li>类型：<code>int</code></li><li>默认值：<code>6808</code></li></ul><p><code>Netty</code> 服务器的TCP端口。</p><h3 id="boss-thread-count" tabindex="-1"><a class="header-anchor" href="#boss-thread-count"><span>boss-thread-count</span></a></h3><ul><li>类型：<code>int</code></li><li>默认值：<code>0</code></li></ul><p>默认值 <code>0</code> 表示交由 <code>Netty</code> 处理。</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">this</span><span class="token punctuation">.</span>bossGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span>bossThreadCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="worker-thread-count" tabindex="-1"><a class="header-anchor" href="#worker-thread-count"><span>worker-thread-count</span></a></h3><ul><li>类型：<code>int</code></li><li>默认值：<code>0</code></li></ul><p>默认值 <code>0</code> 表示交由 <code>Netty</code> 处理。</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">this</span><span class="token punctuation">.</span>workerGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span>workThreadCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="idle-state-handler" tabindex="-1"><a class="header-anchor" href="#idle-state-handler"><span>idle-state-handler</span></a></h3><p>该配置项对应 <code>io.netty.handler.timeout.IdleStateHandler</code> 的 三个属性：<code>readerIdleTime</code>、 <code>writerIdleTime</code> 、<code>allIdelTime</code>。 默认值都是 <code>20m</code>;</p><p>如果你的项目不需要 <code>IdleStateHandler</code> 的话，将 <code>jt808.server.idle-state-handler.enabled</code> 配置为 <code>false</code> 即可。</p><h2 id="entity-scan" tabindex="-1"><a class="header-anchor" href="#entity-scan"><span>entity-scan</span></a></h2><h3 id="enabled" tabindex="-1"><a class="header-anchor" href="#enabled"><span>enabled</span></a></h3><ul><li>类型：<code>boolean</code></li><li>默认值：<code>true</code></li></ul><p>是否启用实体扫描功能。启用后，请求报文可以自动映射到使用 <code>@Jt808ReqMsgBody</code> 标记的 <code>请求消息体实体类</code> 。</p>`,27),z=e("code",null,"请求体消息实体类",-1),q=t('<h3 id="enable-builtin-entity" tabindex="-1"><a class="header-anchor" href="#enable-builtin-entity"><span>enable-builtin-entity</span></a></h3><ul><li>类型：<code>boolean</code></li><li>默认值：<code>true</code></li></ul><p>是否自动注册内置的 <code>请求消息体实体类</code>。<br> 内置的 <code>请求消息体实体类</code> 包括：</p><ul><li><code>AuthRequestMsgBody</code> : 鉴权消息 <code>请求消息体实体类</code>。</li><li><code>EmptyRequestBody</code> : 一个空的 <code>请求消息体实体类</code>。</li></ul><h3 id="base-packages" tabindex="-1"><a class="header-anchor" href="#base-packages"><span>base-packages</span></a></h3><ul><li>类型：<code>String</code></li><li>默认值：<code>&quot;&quot;</code></li></ul><p><code>请求消息体实体类</code> 所在的包名，多个以逗号分隔。</p><h3 id="register-builtin-request-msg-converters" tabindex="-1"><a class="header-anchor" href="#register-builtin-request-msg-converters"><span>register-builtin-request-msg-converters</span></a></h3><ul><li>类型：<code>boolean</code></li><li>默认值：<code>true</code></li></ul><p>是否自动注册内置的 <code>RequestMsgBodyConverter</code>。</p><h2 id="handler-scan" tabindex="-1"><a class="header-anchor" href="#handler-scan"><span>handler-scan</span></a></h2><h3 id="enabled-1" tabindex="-1"><a class="header-anchor" href="#enabled-1"><span>enabled</span></a></h3><ul><li>类型：<code>boolean</code></li><li>默认值：<code>true</code></li></ul><p>是否启用基于注解的MsgHandler功能。启用后，消息处理可以用 <code>@Jt808RequestMsgHandlerMapping</code> 来处理。</p>',14),S=e("code",null,"MsgHandler",-1),T=t('<h3 id="base-packages-1" tabindex="-1"><a class="header-anchor" href="#base-packages-1"><span>base-packages</span></a></h3><ul><li>类型：<code>String</code></li><li>默认值：<code>&quot;&quot;</code></li></ul><p>基于注解的 <code>MsgHandler</code> 所在的包名，多个以逗号分隔。</p><h3 id="register-builtin-msg-handlers" tabindex="-1"><a class="header-anchor" href="#register-builtin-msg-handlers"><span>register-builtin-msg-handlers</span></a></h3><ul><li>类型：<code>boolean</code></li><li>默认值：<code>true</code></li></ul><p>是否自动注册内置的 <code>MsgHandler</code> 。</p><h2 id="exception-handler-scan" tabindex="-1"><a class="header-anchor" href="#exception-handler-scan"><span>exception-handler-scan</span></a></h2><h3 id="enabled-2" tabindex="-1"><a class="header-anchor" href="#enabled-2"><span>enabled</span></a></h3><ul><li>类型：<code>boolean</code></li><li>默认值：<code>true</code></li></ul><p>是否启用全局异常处理机制。启用后，可以用类似于 <code>Spring</code> 的全局异常处理的方式来处理异常。</p>',10),E=e("code",null,"ExceptionHandler",-1),P=t('<h3 id="base-packages-2" tabindex="-1"><a class="header-anchor" href="#base-packages-2"><span>base-packages</span></a></h3><ul><li>类型：<code>String</code></li><li>默认值：<code>&quot;&quot;</code></li></ul><p>基于注解的 <code>ExceptionHandler</code> 所在的包名，多个以逗号分隔。</p><h3 id="register-builtin-exception-handlers" tabindex="-1"><a class="header-anchor" href="#register-builtin-exception-handlers"><span>register-builtin-exception-handlers</span></a></h3><ul><li>类型：<code>boolean</code></li><li>默认值：<code>true</code></li></ul><p>是否自动注册内置的 <code>ExceptionHandler</code> 。</p><h2 id="msg-processor-thread-pool" tabindex="-1"><a class="header-anchor" href="#msg-processor-thread-pool"><span>msg-processor.thread-pool</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>此处为 <code>消息处理线程池</code> 相关的配置。其实就是 <code>Java线程池</code> 几个关键参数的配置。</p></div><h3 id="core-pool-size" tabindex="-1"><a class="header-anchor" href="#core-pool-size"><span>core-pool-size</span></a></h3><ul><li>类型：<code>int</code></li><li>默认值：<code>Runtime.getRuntime().availableProcessors() + 1</code></li></ul><p>消息处理线程池的核心线程数，即 <code>java.util.concurrent.ThreadPoolExecutor.corePoolSize</code>。</p><h3 id="maximum-pool-size" tabindex="-1"><a class="header-anchor" href="#maximum-pool-size"><span>maximum-pool-size</span></a></h3><ul><li>类型：<code>int</code></li><li>默认值：<code>2 * corePoolSize</code></li></ul><p>同 <code>java.util.concurrent.ThreadPoolExecutor.maximumPoolSize</code> 。</p><h3 id="keep-alive-time" tabindex="-1"><a class="header-anchor" href="#keep-alive-time"><span>keep-alive-time</span></a></h3><ul><li>类型：<code>Duration</code></li><li>默认值：<code>60s</code></li></ul><p>同 <code>java.util.concurrent.ThreadPoolExecutor.keepAliveTime</code> 。</p><h3 id="blocking-queue-size" tabindex="-1"><a class="header-anchor" href="#blocking-queue-size"><span>blocking-queue-size</span></a></h3><ul><li>类型：<code>int</code></li><li>默认值：<code>20</code></li></ul><p><code>java.util.concurrent.ThreadPoolExecutor.workQueue</code> 的 <code>size()</code> 。</p><h3 id="thread-name-format" tabindex="-1"><a class="header-anchor" href="#thread-name-format"><span>thread-name-format</span></a></h3><ul><li>类型：<code>String</code></li><li>默认值：<code>808-msg-processor-%d</code></li></ul><p>线程池中线程的命名格式。</p><h2 id="其他配置" tabindex="-1"><a class="header-anchor" href="#其他配置"><span>其他配置</span></a></h2><h3 id="print-component-statistics" tabindex="-1"><a class="header-anchor" href="#print-component-statistics"><span>print-component-statistics</span></a></h3><ul><li>类型：<code>boolean</code></li><li>默认值：<code>true</code></li></ul><p><code>jt808.print-component-statistics</code> 表示是否开启服务启动完成后显示组件统计信息。</p><p>这些统计信息可以显示已经注册的 <code>MsgConverter</code> 、 <code>MsgHandler</code> 等组件。类似于下图所示：</p>',28),M={class:""},N=["src"];function H(o,R){const c=i("ExternalLinkIcon"),s=i("RouteLink");return d(),p("div",null,[u,m,e("p",null,[a("默认的配置可以在"),g,e("a",b,[a("default-jt808-server-config.yml"),n(c)]),v,a(" 中查看。"),k,a(" 并且已经将默认的配置加入到了 "),f,a(" 的 "),x,a(" 中，并将其置于最后，名称为 "),y,a(" 。")]),e("p",_,[e("img",{src:o.$withBase("/img/default-config-property-source.png"),alt:"default-config-property-source"},null,8,j)]),w,e("p",null,[a("使用基于注解的 "),z,a(),n(s,{to:"/v1/jt-808/config/src/v1/jt-808/guide/annotation-based-dev/req-msg-mapping.html"},{default:l(()=>[a("请参考这里")]),_:1}),a("。")]),q,e("p",null,[a("使用基于注解的 "),S,a(),n(s,{to:"/v1/jt-808/config/src/v1/jt-808/guide/annotation-based-dev/msg-handler-register.html"},{default:l(()=>[a("请参考这里")]),_:1}),a("。")]),T,e("p",null,[a("使用基于注解的 "),E,a(),n(s,{to:"/v1/jt-808/config/src/v1/jt-808/guide/annotation-based-dev/exception-handler.html"},{default:l(()=>[a("请参考这里")]),_:1}),a("。")]),P,e("p",M,[e("img",{src:o.$withBase("/img/print-component-statistics.png"),alt:"print-component-statistics"},null,8,N)])])}const I=r(h,[["render",H],["__file","index.html.vue"]]),D=JSON.parse('{"path":"/v1/jt-808/config/","title":"808服务配置(v1)","lang":"zh-CN","frontmatter":{"headerDepth":3,"description":"808服务配置(v1) 本小节会介绍808服务的配置选项。 默认的配置可以在 default-jt808-server-config.yml 中查看。 并且已经将默认的配置加入到了 Spring 的 PropertySources 中，并将其置于最后，名称为 default-jt808-server-config 。 default-config-pr...","head":[["meta",{"property":"og:url","content":"https://github.com/hylexus/jt-framework/jt-framework/v1/jt-808/config/"}],["meta",{"property":"og:site_name","content":"jt-framework"}],["meta",{"property":"og:title","content":"808服务配置(v1)"}],["meta",{"property":"og:description","content":"808服务配置(v1) 本小节会介绍808服务的配置选项。 默认的配置可以在 default-jt808-server-config.yml 中查看。 并且已经将默认的配置加入到了 Spring 的 PropertySources 中，并将其置于最后，名称为 default-jt808-server-config 。 default-config-pr..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-03T08:03:24.000Z"}],["meta",{"property":"article:author","content":"hylexus"}],["meta",{"property":"article:modified_time","content":"2023-07-03T08:03:24.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"808服务配置(v1)\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-07-03T08:03:24.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"hylexus\\",\\"url\\":\\"https://github.com/hylexus\\"}]}"]]},"headers":[{"level":2,"title":"配置项","slug":"配置项","link":"#配置项","children":[]},{"level":2,"title":"protocol","slug":"protocol","link":"#protocol","children":[{"level":3,"title":"version","slug":"version","link":"#version","children":[]},{"level":3,"title":"max-frame-length","slug":"max-frame-length","link":"#max-frame-length","children":[]}]},{"level":2,"title":"server","slug":"server","link":"#server","children":[{"level":3,"title":"port","slug":"port","link":"#port","children":[]},{"level":3,"title":"boss-thread-count","slug":"boss-thread-count","link":"#boss-thread-count","children":[]},{"level":3,"title":"worker-thread-count","slug":"worker-thread-count","link":"#worker-thread-count","children":[]},{"level":3,"title":"idle-state-handler","slug":"idle-state-handler","link":"#idle-state-handler","children":[]}]},{"level":2,"title":"entity-scan","slug":"entity-scan","link":"#entity-scan","children":[{"level":3,"title":"enabled","slug":"enabled","link":"#enabled","children":[]},{"level":3,"title":"enable-builtin-entity","slug":"enable-builtin-entity","link":"#enable-builtin-entity","children":[]},{"level":3,"title":"base-packages","slug":"base-packages","link":"#base-packages","children":[]},{"level":3,"title":"register-builtin-request-msg-converters","slug":"register-builtin-request-msg-converters","link":"#register-builtin-request-msg-converters","children":[]}]},{"level":2,"title":"handler-scan","slug":"handler-scan","link":"#handler-scan","children":[{"level":3,"title":"enabled","slug":"enabled-1","link":"#enabled-1","children":[]},{"level":3,"title":"base-packages","slug":"base-packages-1","link":"#base-packages-1","children":[]},{"level":3,"title":"register-builtin-msg-handlers","slug":"register-builtin-msg-handlers","link":"#register-builtin-msg-handlers","children":[]}]},{"level":2,"title":"exception-handler-scan","slug":"exception-handler-scan","link":"#exception-handler-scan","children":[{"level":3,"title":"enabled","slug":"enabled-2","link":"#enabled-2","children":[]},{"level":3,"title":"base-packages","slug":"base-packages-2","link":"#base-packages-2","children":[]},{"level":3,"title":"register-builtin-exception-handlers","slug":"register-builtin-exception-handlers","link":"#register-builtin-exception-handlers","children":[]}]},{"level":2,"title":"msg-processor.thread-pool","slug":"msg-processor-thread-pool","link":"#msg-processor-thread-pool","children":[{"level":3,"title":"core-pool-size","slug":"core-pool-size","link":"#core-pool-size","children":[]},{"level":3,"title":"maximum-pool-size","slug":"maximum-pool-size","link":"#maximum-pool-size","children":[]},{"level":3,"title":"keep-alive-time","slug":"keep-alive-time","link":"#keep-alive-time","children":[]},{"level":3,"title":"blocking-queue-size","slug":"blocking-queue-size","link":"#blocking-queue-size","children":[]},{"level":3,"title":"thread-name-format","slug":"thread-name-format","link":"#thread-name-format","children":[]}]},{"level":2,"title":"其他配置","slug":"其他配置","link":"#其他配置","children":[{"level":3,"title":"print-component-statistics","slug":"print-component-statistics","link":"#print-component-statistics","children":[]}]}],"git":{"createdTime":1671812085000,"updatedTime":1688371404000,"contributors":[{"name":"eric","email":"dferic@foxmail.com","commits":1},{"name":"hylexus","email":"hylexus@163.com","commits":1}]},"readingTime":{"minutes":2.93,"words":879},"filePathRelative":"v1/jt-808/config/README.md","localizedDate":"2022年12月24日","autoDesc":true,"excerpt":"\\n<p>本小节会介绍808服务的配置选项。</p>\\n<p>默认的配置可以在<br>\\n<a href=\\"https://github.com/hylexus/jt-framework/tree/master/jt-808-server-spring-boot-stater/src/main/resources/META-INF/default-jt808-server-config.yml\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">default-jt808-server-config.yml</a><br>\\n中查看。<br>\\n并且已经将默认的配置加入到了 <code>Spring</code> 的 <code>PropertySources</code> 中，并将其置于最后，名称为 <code>default-jt808-server-config</code> 。</p>"}');export{I as comp,D as data};
